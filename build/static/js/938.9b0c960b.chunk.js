"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[938],{2062:function(e,a){a.Z=function(e){return/^\S+@\S+\.\S+$/.test(e)}},7938:function(e,a,r){r.r(a);var n=r(2982),t=r(4165),s=r(1413),o=r(5861),i=r(885),d=r(2791),c=r(8687),l=r(2419),u=r(5585),h=r(3377),m=r(2062),p=r(6871),f=r(3504),x=r(4569),v=r.n(x),w=r(184);a.default=(0,c.$j)((function(e){return{admin:e.adminDashboard,adminLevel:e.profile.user.admin,name:e.profile.profile.name}}),(function(e){return{promoteToMod:function(){var a=(0,o.Z)((0,t.Z)().mark((function a(r){return(0,t.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,h.UW)(e,r);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),promoteToAdmin:function(){var a=(0,o.Z)((0,t.Z)().mark((function a(r){return(0,t.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,h.nM)(e,r);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),demote:function(){var a=(0,o.Z)((0,t.Z)().mark((function a(r){return(0,t.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,h.J1)(e,r);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}}))((function(e){console.log(e);var a={stats:{Profiles:e.admin.profileCount,Politicians:e.admin.politicians.length,Elections:e.admin.elections.length},"Your Contributions":{"Total Contributions":e.admin.totalContributions,"Elections Created":e.admin.createdElections.length,"Answers Created":e.admin.createdPoliticianAnswers.length,"Politician Profiles Created":e.admin.createdPoliticians.length}},r=["January","February","March","April","May","June","July","August","September","October","November","December"],c=d.useState(e.admin.mods),h=(0,i.Z)(c,2),x=h[0],j=h[1],b=d.useState({}),N=(0,i.Z)(b,2),Z=N[0],g=N[1],C=d.useState({editCandidate:"",editElection:"",softResetCode:"",partyId:"",answerCandidate:"",hardResetCode:""}),E=(0,i.Z)(C,2),k=E[0],y=E[1],S=d.useState({election_id:"",politician_id:""}),D=(0,i.Z)(S,2),A=D[0],I=D[1],R=(0,p.s0)();return e.admin.mods.length>x.length&&j(e.admin.mods),(0,w.jsxs)("div",{className:"dashboard",children:[(0,w.jsxs)("div",{className:"dashboard-header",children:[(0,w.jsxs)("p",{className:"dashboard-header-name",children:["Hi, ",e.name,","]}),(0,w.jsx)("p",{className:"dashboard-header-welcome",children:"Welcome to Elect.io's moderator dashboard "})]}),(0,w.jsx)("h2",{className:"dashboard-title",children:"Elect.io Stats"}),(0,w.jsx)("div",{className:"dashboard-row",children:Object.keys(a.stats).map((function(e){return(0,w.jsxs)("div",{className:"dashboard-row-item",children:[(0,w.jsx)("h3",{className:"dashboard-row-item-header",children:e}),(0,w.jsx)("p",{children:a.stats[e]})]})}))}),(0,w.jsx)("h2",{className:"dashboard-title",children:"Your Contributions"}),(0,w.jsx)("div",{className:"dashboard-row",children:Object.keys(a["Your Contributions"]).map((function(e){return(0,w.jsxs)("div",{className:"dashboard-row-item",children:[(0,w.jsx)("h3",{className:"dashboard-row-item-header",children:e}),(0,w.jsx)("p",{children:a["Your Contributions"][e]})]})}))}),(0,w.jsx)("h2",{className:"dashboard-title",children:"Moderator Information"}),(0,w.jsxs)("div",{className:"dashboard-row",children:[(0,w.jsxs)("div",{className:"dashboard-row-item",children:[(0,w.jsx)("h3",{className:"dashboard-row-item-header",children:"Your Mod Level"}),(0,w.jsx)("p",{children:1===e.adminLevel?"Moderator":2===e.adminLevel?"Admin":"Super Admin"})]}),(0,w.jsxs)("div",{className:"dashboard-row-mod",children:[(0,w.jsx)("h3",{className:"dashboard-row-item-header",children:"Moderators"}),(0,w.jsx)("div",{className:"dashboard-row-mod-container",children:x.map((function(a){return a.admin<1?null:(0,w.jsxs)("div",{className:"dashboard-row-mod-container-each",children:[(0,w.jsx)("img",{className:"dashboard-row-mod-container-each-img",src:a.picture,alt:a.name}),(0,w.jsx)("p",{className:"dashboard-row-mod-container-each-name",children:a.name}),(0,w.jsx)("p",{className:"dashboard-row-mod-container-each-admin",children:1===a.admin?"Moderator":2===a.admin?"Admin":"Super Admin"}),e.adminLevel>2?(0,w.jsxs)("div",{className:"dashboard-row-mod-container-each-alter",children:[a.admin<e.adminLevel-1?(0,w.jsx)(l.Z,{onClick:(0,o.Z)((0,t.Z)().mark((function r(){return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return j((function(e){return e.map((function(e){return e.user.toString()!==a.user.toString()?e:(0,s.Z)((0,s.Z)({},e),{},{admin:2})}))})),r.prev=1,r.next=4,e.promoteToAdmin(a.user);case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(1),j(e.admin.mods);case 9:case"end":return r.stop()}}),r,null,[[1,6]])})))}):null,a.admin<e.adminLevel?(0,w.jsx)(u.Z,{onClick:(0,o.Z)((0,t.Z)().mark((function r(){return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return j((function(e){return e.map((function(e){return e.user.toString()!==a.user.toString()?e:(0,s.Z)((0,s.Z)({},e),{},{admin:e.admin-1})}))})),r.prev=1,r.next=4,e.demote(a.user);case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(1),j(e.admin.mods);case 9:case"end":return r.stop()}}),r,null,[[1,6]])})))}):null]}):null]})}))})]}),e.adminLevel>1?(0,w.jsxs)("div",{className:"dashboard-row-mod",children:[(0,w.jsx)("h3",{className:"dashboard-row-item-header",children:"Add a new moderator"}),(0,w.jsxs)("div",{className:"dashboard-row-mod-input",children:[(0,w.jsx)("p",{children:"Enter Mod's Email"}),(0,w.jsx)("input",{placeholder:"Email",onChange:function(){var e=(0,o.Z)((0,t.Z)().mark((function e(a){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,m.Z)(a.target.value)){e.next=6;break}return console.log("true email"),e.next=4,v().get("/api/mod/email/".concat(a.target.value));case 4:(r=e.sent).data.user&&g({picture:r.data.profile.picture,name:r.data.profile.name,email:r.data.user.email,id:r.data.user._id});case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()})]}),Z.name?(0,w.jsx)("div",{className:"dashboard-row-mod-container",children:(0,w.jsxs)("div",{className:"dashboard-row-mod-container-each",children:[(0,w.jsx)("img",{className:"dashboard-row-mod-container-each-img",src:Z.picture,alt:Z.name}),(0,w.jsx)("p",{className:"dashboard-row-mod-container-each-name",children:Z.name}),(0,w.jsx)("p",{className:"dashboard-row-mod-container-each-name",children:Z.email}),(0,w.jsx)("div",{className:"dashboard-row-mod-container-each-alter",children:(0,w.jsx)(l.Z,{onClick:(0,o.Z)((0,t.Z)().mark((function a(){return(0,t.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return j((function(e){return[].concat((0,n.Z)(e),[{admin:1,user:Z.id,name:Z.name,picture:Z.picture}])})),a.prev=1,a.next=4,e.promoteToMod(Z.id);case 4:g({}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),j(e.admin.mods);case 10:case"end":return a.stop()}}),a,null,[[1,7]])})))})})]})}):null]}):null]}),(0,w.jsx)("h2",{className:"dashboard-title",children:"Moderator Tools"}),(0,w.jsxs)("div",{className:"dashboard-row",children:[(0,w.jsx)(f.rU,{to:"/create/candidate",className:"dashboard-row-mod-link",children:(0,w.jsx)("p",{className:"dashboard-row-item-link",children:" Create a Candidate"})}),(0,w.jsx)(f.rU,{to:"/create/election",className:"dashboard-row-mod-link",children:(0,w.jsx)("p",{className:"dashboard-row-item-link",children:" Create an Election"})}),(0,w.jsx)(f.rU,{to:"/create/candidate",className:"dashboard-row-mod-link",children:(0,w.jsx)("p",{className:"dashboard-row-item-link",children:" Answer General Questions as a Politician"})}),(0,w.jsx)(f.rU,{to:"/create/party",className:"dashboard-row-mod-link",children:(0,w.jsx)("p",{className:"dashboard-row-item-link",children:" Create a political party"})})]}),(0,w.jsxs)("div",{className:"dashboard-row",children:[(0,w.jsxs)("div",{className:"dashboard-row-mod",children:[(0,w.jsx)("h3",{className:"dashboard-row-item-header",children:"Edit a Candidate"}),(0,w.jsx)("div",{className:"dashboard-row-mod-container",children:(0,w.jsxs)("form",{onSubmit:function(e){e.preventDefault(),R("/edit/candidate/".concat(k.editCandidate))},className:"dashboard-row-mod-input",children:[(0,w.jsx)("p",{children:"Enter Candidate's ID"}),(0,w.jsx)("input",{onChange:function(){var e=(0,o.Z)((0,t.Z)().mark((function e(a){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y((function(e){return(0,s.Z)((0,s.Z)({},e),{},{editCandidate:a.target.value})}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),placeholder:"Name"})]})})]}),(0,w.jsxs)("div",{className:"dashboard-row-mod",children:[(0,w.jsx)("h3",{className:"dashboard-row-item-header",children:"Edit an Election"}),(0,w.jsx)("div",{className:"dashboard-row-mod-container",children:(0,w.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(e),R("/edit/election/".concat(k.editElection))},className:"dashboard-row-mod-input",children:[(0,w.jsx)("p",{children:"Enter Election ID"}),(0,w.jsx)("input",{placeholder:"ID",onChange:function(){var e=(0,o.Z)((0,t.Z)().mark((function e(a){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y((function(e){return(0,s.Z)((0,s.Z)({},e),{},{editElection:a.target.value})}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()})]})})]}),(0,w.jsxs)("div",{className:"dashboard-row-mod",children:[(0,w.jsx)("h3",{className:"dashboard-row-item-header",children:"Answer General Questions as a politician"}),(0,w.jsx)("div",{className:"dashboard-row-mod-container",children:(0,w.jsxs)("form",{onSubmit:function(e){e.preventDefault(),R("/assessment/general/".concat(k.answerCandidate))},className:"dashboard-row-mod-input",children:[(0,w.jsx)("p",{children:"Enter Candidate's ID"}),(0,w.jsx)("input",{onChange:function(){var e=(0,o.Z)((0,t.Z)().mark((function e(a){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y((function(e){return(0,s.Z)((0,s.Z)({},e),{},{answerCandidate:a.target.value})}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),value:k.answerCandidate,placeholder:"ID"})]})})]}),(0,w.jsxs)("div",{className:"dashboard-row-mod",children:[(0,w.jsx)("h3",{className:"dashboard-row-item-header",children:"Answer Election Specific Questions as a Politician"}),(0,w.jsxs)("div",{className:"dashboard-row-mod-container",children:[(0,w.jsxs)("form",{onSubmit:function(){var e=(0,o.Z)((0,t.Z)().mark((function e(a){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),console.log("form"),R("/assessment/".concat(A.election_id,"/").concat(A.politician_id));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),className:"dashboard-row-mod-input",children:[(0,w.jsx)("p",{children:"Enter Election ID"}),(0,w.jsx)("input",{placeholder:"Election's ID",value:A.election_id,onChange:function(e){return I((function(a){return(0,s.Z)((0,s.Z)({},a),{},{election_id:e.target.value})}))}})]}),(0,w.jsxs)("form",{onSubmit:function(){var e=(0,o.Z)((0,t.Z)().mark((function e(a){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),console.log("form"),R("/assessment/".concat(A.election_id,"/").concat(A.politician_id));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),className:"dashboard-row-mod-input",children:[(0,w.jsx)("p",{children:"Enter Politician's ID"}),(0,w.jsx)("input",{placeholder:"Politician's id",value:A.politician_id,onChange:function(e){return I((function(a){return(0,s.Z)((0,s.Z)({},a),{},{politician_id:e.target.value})}))}})]})]})]}),(0,w.jsx)("div",{className:"dashboard-row-mod",children:(0,w.jsx)("div",{className:"dashboard-row-mod-container",children:(0,w.jsxs)("form",{onSubmit:function(){var e=(0,o.Z)((0,t.Z)().mark((function e(a){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault();try{R("/edit/party/"+k.partyId)}catch(r){console.log(r)}case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),className:"dashboard-row-mod-input",children:[(0,w.jsx)("p",{children:"Edit Political Party"}),(0,w.jsx)("input",{placeholder:"Party Id",value:k.partyId,onChange:function(){var e=(0,o.Z)((0,t.Z)().mark((function e(a){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y((function(e){return(0,s.Z)((0,s.Z)({},e),{},{partyId:a.target.value})}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()})]})})})]}),(0,w.jsx)("h2",{className:"dashboard-title",children:"Overview"}),(0,w.jsxs)("div",{className:"dashboard-row",children:[(0,w.jsxs)("div",{className:"dashboard-row-mod",children:[(0,w.jsx)("h3",{className:"dashboard-row-item-header",children:"Politicians"}),(0,w.jsx)("div",{className:"dashboard-row-mod-container",children:(0,w.jsx)("div",{className:"dashboard-row-mod-container-politicians",children:e.admin.politicians.map((function(e){return(0,w.jsxs)("div",{className:"dashboard-row-mod-container-politicians-each",onClick:function(){R("/candidate/".concat(e._id))},children:[(0,w.jsx)("img",{src:e.picture,alt:e.name}),(0,w.jsx)("p",{children:e.name}),(0,w.jsxs)("p",{children:[e.state,", ",e.country]})]})}))})})]}),(0,w.jsxs)("div",{className:"dashboard-row-mod",children:[(0,w.jsx)("h3",{className:"dashboard-row-item-header",children:"Elections"}),(0,w.jsx)("div",{className:"dashboard-row-mod-container",children:(0,w.jsx)("div",{className:"dashboard-row-mod-container-politicians",children:e.admin.elections.map((function(e){return(0,w.jsxs)("div",{className:"dashboard-row-mod-container-politicians-each",onClick:function(){R("/election/".concat(e._id))},children:[(0,w.jsx)("p",{children:e.for}),(0,w.jsxs)("p",{children:[e.location.city?e.location.city+",":null," ",e.location.state?e.location.state+",":null," ",e.location.country?e.location.country:null]}),(0,w.jsx)("p",{children:r[new Date(e.date).getMonth()]+" "+new Date(e.date).getDate()+"th, "+new Date(e.date).getFullYear()})]})}))})})]}),(0,w.jsxs)("div",{className:"dashboard-row-mod",children:[(0,w.jsx)("h3",{className:"dashboard-row-item-header",children:"Parties"}),(0,w.jsx)("div",{className:"dashboard-row-mod-container",children:(0,w.jsx)("div",{className:"dashboard-row-mod-container-politicians",children:e.admin.parties.map((function(e){return(0,w.jsxs)("div",{className:"dashboard-row-mod-container-politicians-each",style:(e.color,{}),onClick:function(){R("/party/".concat(e._id))},children:[(0,w.jsx)("img",{alt:e.name,src:e.symbol}),(0,w.jsx)("p",{children:e.name}),(0,w.jsx)("p",{children:e.country})]})}))})})]})]}),3===e.adminLevel?(0,w.jsxs)("div",{children:[" ",(0,w.jsx)("h2",{className:"dashboard-title",children:"Super Admin Tools"}),(0,w.jsxs)("div",{className:"dashboard-row",children:[(0,w.jsxs)("div",{className:"dashboard-row-mod",children:[(0,w.jsx)("h3",{className:"dashboard-row-item-header",children:"SOFT RESET"}),(0,w.jsx)("div",{className:"dashboard-row-mod-container",children:(0,w.jsxs)("form",{onSubmit:function(){var e=(0,o.Z)((0,t.Z)().mark((function e(a){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.preventDefault(),e.next=4,v().post("/api/reset/reset/soft/",{code:k.softResetCode});case 4:document.location.reload(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}(),className:"dashboard-row-mod-input",children:[(0,w.jsx)("p",{children:"ENTER SOFT RESET CODE "}),(0,w.jsx)("input",{onChange:function(){var e=(0,o.Z)((0,t.Z)().mark((function e(a){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y((function(e){return(0,s.Z)((0,s.Z)({},e),{},{softResetCode:a.target.value})}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),placeholder:"SOFT RESET CODE"})]})})]}),(0,w.jsxs)("div",{className:"dashboard-row-mod",children:[(0,w.jsx)("h3",{className:"dashboard-row-item-header",children:"HARD RESET"}),(0,w.jsx)("div",{className:"dashboard-row-mod-container",children:(0,w.jsxs)("form",{onSubmit:function(){var e=(0,o.Z)((0,t.Z)().mark((function e(a){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.preventDefault(),e.next=4,v().post("/api/reset/reset/hard/",{code:k.hardResetCode});case 4:document.location.reload(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}(),className:"dashboard-row-mod-input",children:[(0,w.jsx)("p",{children:"ENTER HARD RESET CODE"}),(0,w.jsx)("input",{placeholder:"HARD RESET CODE",onChange:function(){var e=(0,o.Z)((0,t.Z)().mark((function e(a){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y((function(e){return(0,s.Z)((0,s.Z)({},e),{},{hardResetCode:a.target.value})}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()})]})})]})]}),(0,w.jsxs)("div",{className:"dashboard-row",children:[(0,w.jsx)(f.rU,{to:"/edit/questions/general",className:"dashboard-row-mod-link",children:(0,w.jsx)("p",{className:"dashboard-row-item-link",children:"Edit Questions"})}),(0,w.jsx)("div",{className:"dashboard-row-mod",children:(0,w.jsx)("div",{className:"dashboard-row-mod-container",children:(0,w.jsxs)("form",{onSubmit:function(){var e=(0,o.Z)((0,t.Z)().mark((function e(a){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a.preventDefault(),R("/edit/questions/"+k.createdElectionId)}catch(r){console.log(r)}case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),className:"dashboard-row-mod-input",children:[(0,w.jsx)("p",{children:"Create Election Specific Questions"}),(0,w.jsx)("input",{placeholder:"Election Id",value:k.createdElectionId,onChange:function(){var e=(0,o.Z)((0,t.Z)().mark((function e(a){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y((function(e){return(0,s.Z)((0,s.Z)({},e),{},{createdElectionId:a.target.value})}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()})]})})})]})]}):null]})}))},2419:function(e,a,r){var n=r(5318);a.Z=void 0;var t=n(r(5649)),s=r(184),o=(0,t.default)((0,s.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");a.Z=o},5585:function(e,a,r){var n=r(5318);a.Z=void 0;var t=n(r(5649)),s=r(184),o=(0,t.default)((0,s.jsx)("path",{d:"M19 13H5v-2h14v2z"}),"Remove");a.Z=o}}]);
//# sourceMappingURL=938.9b0c960b.chunk.js.map