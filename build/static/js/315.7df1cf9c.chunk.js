"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[315],{8315:function(e,n,r){r.r(n);var t=r(2982),s=r(4165),i=r(1413),o=r(5861),a=r(885),u=r(2791),c=r(8687),l=r(6871),d=r(9673),p=r(4852),f=r(4569),g=r.n(f),v=(r(374),r(184));n.default=(0,c.$j)((function(e){return{generalQuestions:e.poll}}),(function(e){return{getAllQuestions:function(){var n=(0,o.Z)((0,s.Z)().mark((function n(){return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,d.Z)(e);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()}}))((function(e){var n=(0,l.UO)().id;(0,l.s0)();console.log(n);var r=u.useState({current:0,completed:[],answers:[],source:"",politician:{name:"",picture:""},loaded:!1}),c=(0,a.Z)(r,2),d=c[0],f=c[1];u.useEffect((function(){(0,o.Z)((0,s.Z)().mark((function e(){var r,t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g().get("/api/politician/".concat(n));case 2:return r=e.sent,e.next=5,g().get("/api/answer-politician-general-question/"+n);case 5:t=e.sent,f((function(e){return(0,i.Z)((0,i.Z)({},e),{},{politician:r.data.politician,answers:t.data.answers})}));case 7:case"end":return e.stop()}}),e)})))()}),[]);var h=function(){var r=(0,o.Z)((0,s.Z)().mark((function r(o,a){var u,c,l;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("set answer"),console.log(o),r.next=4,g().post("/api/answer-politician-general-question/"+e.generalQuestions.questions[d.current]._id+"/"+n+"/"+o,{source:(null===(u=d.source[0])||void 0===u?void 0:u.length)>4?d.source[0]:(null===a||void 0===a?void 0:a.source[0].length)>4?a.source[0]:"none"});case 4:c=r.sent,l=d.answers.find((function(e){return e.question.toString()===c.data.answer.question.toString()})),f(l?function(e){return(0,i.Z)((0,i.Z)({},e),{},{answers:e.answers.map((function(e){return console.log(e,c.data.answer),e.question.toString()===c.data.answer.question.toString()?c.data.answer:e}))})}:function(e){return(0,i.Z)((0,i.Z)({},e),{},{answers:[].concat((0,t.Z)(e.answers),[c.data.answer]),source:""})}),setTimeout((function(){Z()}),200);case 8:case"end":return r.stop()}}),r)})));return function(e,n){return r.apply(this,arguments)}}(),Z=function(){var n=d.answers.find((function(n){var r;if(n.question.toString()===(null===(r=e.generalQuestions.questions[d.current+1])||void 0===r?void 0:r._id.toString()))return n}));console.log(n),n?f((function(e){return(0,i.Z)((0,i.Z)({},e),{},{source:null===n||void 0===n?void 0:n.source})})):(console.log("setting source to none"),f((function(e){return(0,i.Z)((0,i.Z)({},e),{},{source:["",""]})}))),f((function(e){return(0,i.Z)((0,i.Z)({},e),{},{current:e.current+1})}))};if(e.generalQuestions.loaded){if(!e.generalQuestions.questions[d.current])return(0,v.jsx)(l.Fg,{to:"/candidate/"+n});var w=d.answers.find((function(n){if(n.question.toString()===e.generalQuestions.questions[d.current]._id.toString())return n}));return w&&!d.loaded&&f((function(e){return(0,i.Z)((0,i.Z)({},e),{},{source:w.source,loaded:!0})})),console.log(w),(0,v.jsxs)("div",{className:"poll-politicians",children:[(0,v.jsxs)("div",{className:"poll-politician",children:[(0,v.jsx)("h3",{children:"You're taking the quiz as "}),(0,v.jsxs)("div",{children:[(0,v.jsx)("img",{src:d.politician.picture,alt:d.politician.name}),(0,v.jsx)("p",{children:d.politician.name})]})]}),(0,v.jsx)("div",{className:"poll-container",children:(0,v.jsxs)("div",{className:"poll-general",children:[(0,v.jsxs)("div",{className:"poll-general-question",children:[(0,v.jsx)("h2",{className:"poll-general-question-title",children:e.generalQuestions.questions[d.current].question}),(0,v.jsxs)("div",{className:"poll-general-question-answer",children:[["Strongly Agree","Agree","Unsure","Disagree","Strongly Disagree"].map((function(e,n){return(0,v.jsx)("p",{onClick:h.bind(undefined,n,w),className:(null===w||void 0===w?void 0:w.answer)===n?"poll-general-question-answer-each poll-general-question-answer-each-selected":"poll-general-question-answer-each",children:e})})),(0,v.jsx)("input",{class:"poll-politician-input",value:d.source[0],placeholder:"Source",onChange:function(e){w.source&&f((function(n){return(0,i.Z)((0,i.Z)({},n),{},{answers:n.answers.map((function(n){return n._id.toString()===w._id?(0,i.Z)((0,i.Z)({},n),{},{source:[e.target.value,""]}):n}))})})),f((function(n){return(0,i.Z)((0,i.Z)({},n),{},{source:e.target.value})}))}}),(0,v.jsx)("p",{children:"Please enter the source before selecting the answer"})]}),(0,v.jsxs)("div",{className:"poll-arrows",children:[d.current>0?(0,v.jsxs)("span",{onClick:function(){var n=d.answers.find((function(n){if(n.question.toString()===e.generalQuestions.questions[d.current-1]._id.toString())return n}));f(n?function(e){return(0,i.Z)((0,i.Z)({},e),{},{source:null===n||void 0===n?void 0:n.source})}:function(e){return(0,i.Z)((0,i.Z)({},e),{},{source:""})}),f((function(e){return(0,i.Z)((0,i.Z)({},e),{},{current:e.current-1})}))},children:[" ",(0,v.jsx)(p.Z,{className:"poll-arrows-left"})]}):null,(0,v.jsx)("span",{onClick:Z,className:"poll-arrows-right",children:(0,v.jsx)(p.Z,{})})]})]}),(0,v.jsx)("div",{className:"poll-general-key",children:e.generalQuestions.questions.map((function(n,r){return(0,v.jsxs)("div",{className:"poll-general-key-each",onClick:function(){var n=d.answers.find((function(n){if(n.question.toString()===e.generalQuestions.questions[r]._id.toString())return n}));f((function(e){return(0,i.Z)((0,i.Z)({},e),{},{current:r,source:n?null===n||void 0===n?void 0:n.source:["",""]})}))},children:[(0,v.jsx)("div",{className:r===d.current?"poll-general-key-each-selected":"poll-general-key-each-unselected",children:(0,v.jsx)("div",{className:d.answers.find((function(e){return e.question.toString()===n._id.toString()}))?"poll-general-key-each-filled":null})})," "]})}))})]})})]})}return(0,v.jsx)("div",{})}))}}]);
//# sourceMappingURL=315.7df1cf9c.chunk.js.map